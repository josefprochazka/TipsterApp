@using TipsterApp.Data
@using TipsterApp.Services
@inject StatsBackgroundService StatsService
@page "/stats"

<div class="stats-mainbox">
    <h2 class="stats-title">📊 Statistiky</h2>

    @if (StatsService.Stats.HighestTip != null)
    {
        <div class="stats-row">
            <strong>Celková částka všech spropitných:</strong>
            <span class="stats-value">@StatsService.Stats.TotalTips Kč</span>
        </div>
        <div class="stats-row">
            <strong>Nejvyšší spropitné dne:</strong>
            <span class="stats-value">
                @StatsService.Stats.HighestTip.TipAmount Kč (@StatsService.Stats.HighestTip.TipPercent %)
                – @StatsService.Stats.HighestTip.Inserted.ToString("g")
            </span>
        </div>
        <div class="stats-row">
            <strong>Průměrné procento spropitného:</strong>
            <span class="stats-value">
                @(StatsService.Stats.AvgPercent.ToString("F2")) %
            </span>
        </div>
        <div class="stats-row">
            <strong>Průměrné hodnocení:</strong>
            <span class="stats-value">
                @(StatsService.Stats.AvgRating.ToString("F2"))
            </span>
        </div>
    }
    else
    {
        <div class="stats-nodata">Žádná data zatím nejsou.</div>
    }
</div>

<style>
    .stats-mainbox {
        background: #f0f7ff;
        border-radius: 18px;
        padding: 32px 24px 24px 24px;
        max-width: 540px;
        margin: 30px auto 0 auto;
        box-shadow: 0 4px 16px #e3e3e3;
    }

    .stats-title {
        color: #0077cc;
        text-align: center;
        margin-bottom: 20px;
        font-size: 2.1rem;
        font-weight: bold;
        letter-spacing: 1px;
        text-shadow: 1px 1px 5px #e0eaff;
    }

    .stats-row {
        margin-bottom: 16px;
        font-size: 1.1rem;
        display: flex;
        gap: 10px;
        align-items: center;
    }

    .stats-value {
        color: #007700;
        font-weight: bold;
    }

    .stats-nodata {
        color: #888;
        text-align: center;
        font-size: 1.1rem;
        margin-top: 24px;
    }
</style>
